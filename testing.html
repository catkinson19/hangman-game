<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Hangman Testing</title>
    <meta name="description" content="Hangman Testing">
    <meta name="author" content="Christopehr Atkinson">
</head>

<body>
    <h1>Subjects</h1>

    <label><input checked type="checkbox" value="">Animals</label>

    <label><input checked type="checkbox" value="">Countries</label>

    <label><input checked type="checkbox" value="">Foods</label>

    <label><input checked type="checkbox" value="">Misc</label>
    <hr>

    <h1>Variables</h1>
    <p>Subject</p>
    <p id="subject">#subject</p>
    <br>
    <p>Word Length</p>
    <p id="wordLen">#wordLength</p>
    <br>
    <p>Tries</p>
    <p id="tries">#tries</p>
    <br>
    <p>Tries Remaining</p>
    <p id="triesRem">#triesRem</p>
    <br>
    <p>Wins</p>
    <p id="wins">#wins</p>
    <br>
    <p>Losses</p>
    <p id="losses">#losses</p>
    <hr>

    <h1> Input Space </h1>
    <p id="inputSpace"></p>


    <script>

//Element Map
let gameSubject = document.getElementById('subject');
let gameWordLen = document.getElementById('wordLen');
let gameTries = document.getElementById('tries');
let gameTriesRem = document.getElementById('triesRem');
let gameWins = document.getElementById('wins');
let gameLosses = document.getElementById('losses');
let gameInputSpace = document.getElementById('inputSpace');

let hangman = {

    //Globals
    subject: "",
    wins: 0,
    losses: 0,

    //Subjects
    animals: ['antelope', 'cheetah', 'moongoose'],
    countries: ['argentina', 'mexico', 'switzerland'],
    foods: ['quinoa', 'salad', 'cheese'],

    updateDom: function (id, newval) {
        if (id === "subject") {
            return gameSubject.innerHTML = newval;
        }
        else if (id === "wordLen") {
            return gameWordLen.innerHTML = newval;
        }
        else if (id === "tries") {
            return gameTries.innerHTML = newval;
        }
        else if (id === "triesRem") {
            return gameTriesRem.innerHTML = newval;
        }
        else if (id === "wins") {
            return gameWins.innerHTML = newval;
        }
        else if (id === "losses") {
            return gameLosses.innerHTML = newval;
        }
        else if (id === "inputSpace") {
            return gameInputSpace.innerHTML = newval;
        }
    },

    randWord: function (subject) {
        let min = Math.ceil(0);
        let max = Math.floor(subject.length - 1);
        let rand = subject[Math.floor(Math.random() * (max - min + 1)) + min];
        return rand;
    },

    wordToArr: function (word) {
        let wordArr = []
        for (let i = 0; i <= word.length; i++) {
            wordArr.push(word[i]);
        }
        return wordArr;
    },

    pickWordFromSubj: function (subject) {
        if (subject === "animals") {
            return hangman.wordToArr(hangman.randWord(hangman.animals));
        }
        if (subject === "countries") {
            return hangman.wordToArr(hangman.randWord(hangman.countries));
        }
        if (subject === "foods") {
            return hangman.wordToArr(hangman.randWord(hangman.foods));
        }
    },

    buildInputArray: function (len) {
        let arr = []
        for (let i = 0; i < len; i++) {
            arr.push("_");
        }
        return arr;
    },

    renderArray: function (arr) {
        return (arr.toString().toUpperCase().replace(/,/g, ""));
    },

    /*
    TODO: Figureout how to use keyboard input

    detectAndEval: function () {
        let guesses = [];

        console.log(word + " dE!");
        console.log(inputSpace + "dE!");
        console.log(tries + "dE!");
        console.log(wordLen + "dE!");

        document.onkeyup = function (e) {
            console.log(typeof (word) + "hey sucka");
            if (e.which <= 90 && e.which >= 65) {
                if (e.key === word[1]) {
                    console.log("Good guess!")
                    guesses.push(e.key);
                } else if (e.key !== word[1]) {
                    console.log("Bad guess!");
                }
            } else {
                alert("Sorry, that's not a valid input")
            }
        }
    },

    */

    startgame: function (subject) {
        console.log("Starting Game");
        subject = subject;
        word = hangman.pickWordFromSubj(subject);
        wordLen = word.length;
        inputSpace = hangman.buildInputArray(wordLen);
        tries = 0;
        triesRem = 0;

        hangman.updateDom("subject", subject);
        hangman.updateDom("wordLen", wordLen);
        hangman.updateDom("tries", tries);
        hangman.updateDom("triesRem", triesRem);
        hangman.updateDom("wins", hangman.wins);
        hangman.updateDom("losses", hangman.losses);
        hangman.updateDom("inputSpace", hangman.renderArray(inputSpace));

        //hangman.detectAndEval();


    }
}

//Initialize
window.onload = function () {
    //Override
    hangman.startgame("animals");
}
    </script>
</body>

</html>